<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Crochet Time & Yarn Calculator — Preview</title>
  <style>
    :root{
      --bg: #F8F3EC; 
      --card: #FFFFFF;
      --accent: #4A7C59; 
      --muted: #7A7A7A;
      --chip: #EFE8DE;
      --meter: #8fbc8f;
      --shadow: 0 6px 18px rgba(16,24,40,0.08);
      font-family: Inter, system-ui, -apple-system, 'Segoe UI', Roboto, 'Helvetica Neue', Arial;
    }
    *{box-sizing:border-box}
    body{margin:0;background:var(--bg);color:#3C3C3C}
    .container{max-width:1100px;margin:30px auto;padding:20px}

    header{display:flex;gap:18px;align-items:center}
    .logo{width:74px;height:74px;border-radius:14px;background:linear-gradient(135deg,#FDEFE2,#F8F3EC);display:flex;align-items:center;justify-content:center;box-shadow:var(--shadow)}
    .logo svg{width:44px;height:44px}
    h1{margin:0;font-size:22px}
    p.lead{margin:6px 0 0;color:var(--muted)}

    .card{background:var(--card);border-radius:14px;padding:22px;margin-top:18px;box-shadow:var(--shadow)}
    .grid{display:grid;grid-template-columns:1fr 420px;gap:20px}
    @media (max-width:980px){.grid{grid-template-columns:1fr} .logo{width:56px;height:56px} }

    label{display:block;font-size:14px;margin-bottom:8px;color:#3C3C3C}
    select{width:100%;padding:12px;border-radius:10px;border:1px solid #E6E1DB;background:white}
    .row{display:flex;gap:12px}
    .btn{background:var(--accent);color:white;border:none;padding:12px 18px;border-radius:10px;cursor:pointer;font-weight:600}
    .muted{color:var(--muted);font-size:13px}

    .result{padding:18px;border-radius:12px;background:linear-gradient(180deg,#FFFFFF,#FBFBFB);box-shadow:0 8px 30px rgba(20,30,20,0.04)}
    .stat{display:flex;justify-content:space-between;align-items:center;padding:12px 0;border-bottom:1px dashed #EEE}
    .stat:last-child{border-bottom:none}
    .big{font-size:20px;font-weight:700}

    .meter{height:12px;background:#eee;border-radius:999px;overflow:hidden}
    .meter > i{display:block;height:100%;background:linear-gradient(90deg,var(--meter),#7dbb8a);width:30%}

    .tips{font-size:13px;color:#3C3C3C;margin-top:10px}

    .footer{margin-top:14px;font-size:13px;color:var(--muted)}

    .brand-small{font-size:12px;color:var(--muted)}

    .center{display:flex;align-items:center;justify-content:center}
    .kbd{background:#F7F4F1;padding:6px 8px;border-radius:8px;font-weight:600}

    .preset-buttons{display:flex;gap:8px;flex-wrap:wrap}
    .chip{padding:8px 12px;border-radius:999px;background:var(--chip);border:1px solid #E2D9CD;cursor:pointer}

    /* small spacing */
    .muted.small{font-size:12px;color:var(--muted)}

    /* responsive tweaks */
    @media (max-width:500px){ .grid{gap:10px} .card{padding:14px} .big{font-size:18px} }
  </style>
</head>
<body>
  <div class="container">
    <header>
      <div class="logo" aria-hidden>
        <svg viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg" aria-hidden>
          <rect x="3" y="3" width="18" height="18" rx="6" fill="#FDEFE2" />
          <path d="M12 6.5c-2.2 0-4 1.8-4 4s4 6 4 6 4-3.8 4-6-1.8-4-4-4z" fill="#4A7C59" opacity="0.95"/>
        </svg>
      </div>
      <div>
        <h1>Crochet Time & Yarn Calculator</h1>
        <p class="lead">Estimate how long a crochet project takes, yarn needed, and a suggested price — built for makers.</p>
      </div>
    </header>

    <div class="grid">
      <div>
        <div class="card">
          <h3>1. Choose project details</h3>

          <div style="margin-top:12px">
            <label for="product">Product type</label>
            <select id="product">
              <option value="bag">Bag</option>
              <option value="coaster" selected>Coaster</option>
              <option value="keychain">Keychain</option>
              <option value="slippers">Slippers</option>
              <option value="flower">Flower / applique</option>
              <option value="toy">Toy / Amigurumi</option>
            </select>
          </div>

          <div style="margin-top:14px">
            <label for="yarn">Yarn type / thickness</label>
            <select id="yarn">
              <option value="thin">Thin cotton (lace)</option>
              <option value="cotton" selected>Cotton / standard</option>
              <option value="wool">Wool / medium</option>
              <option value="chunky">Chunky / bulky</option>
            </select>
            <div class="muted small" style="margin-top:8px">Yarn affects how fast you crochet and how much yarn is used.</div>
          </div>

          <div style="margin-top:14px">
            <label for="skill">Your skill level</label>
            <select id="skill">
              <option value="beginner">Beginner</option>
              <option value="intermediate" selected>Intermediate</option>
              <option value="expert">Expert</option>
            </select>
          </div>

          <div style="margin-top:18px;display:flex;gap:12px;align-items:center">
            <button class="btn" id="calcBtn">Calculate</button>
            <button id="resetBtn" class="chip">Reset</button>
          </div>

          <div style="margin-top:16px">
            <div class="brand-small muted">Quick presets</div>
            <div class="preset-buttons" style="margin-top:8px">
              <div class="chip" data-product="coaster" onclick="applyPreset(event)">Coaster - Quick</div>
              <div class="chip" data-product="bag" onclick="applyPreset(event)">Bag - Detailed</div>
              <div class="chip" data-product="toy" onclick="applyPreset(event)">Toy - Long</div>
            </div>
          </div>

        </div>

        <div class="card" style="margin-top:18px">
          <h3>How the calculator works</h3>
          <p class="muted">We use base values per product and adjust for yarn thickness and skill level. The result is an estimate — fine tune by testing a small swatch.</p>
          <ul class="muted small" style="margin-top:10px">
            <li>Time estimate uses minutes</li>
            <li>Yarn shown in grams</li>
            <li>Price is a suggested range in ₹</li>
          </ul>
        </div>
      </div>

      <div>
        <div class="card result">
          <h3>Results</h3>

          <div id="resultArea" style="margin-top:8px">
            <div class="stat"><div class="muted">Estimated Time</div><div id="time" class="big">—</div></div>
            <div class="stat"><div class="muted">Yarn Needed</div><div id="yarnAmt" class="big">—</div></div>
            <div class="stat"><div class="muted">Suggested Price</div><div id="priceRange" class="big">—</div></div>
            <div class="stat"><div class="muted">Difficulty</div><div style="width:50%"><div class="meter" aria-hidden><i id="meterBar"></i></div></div></div>
            <div class="stat"><div class="muted">Pattern tip</div><div id="tip" class="muted">—</div></div>
          </div>

          <div class="tips" id="extraTips" style="display:none;margin-top:10px">
            <strong>Pro tips:</strong>
            <ul>
              <li id="tip1"></li>
              <li id="tip2"></li>
            </ul>
          </div>

          <div class="footer" style="margin-top:12px">
            <div style="display:flex;gap:12px;align-items:center;justify-content:space-between">
              <div class="muted">Export or save your estimate</div>
              <div style="display:flex;gap:8px">
                <button class="chip" id="copyBtn">Copy</button>
                <button class="chip" id="downloadBtn">Download</button>
              </div>
            </div>
          </div>

        </div>

        <div class="card" style="margin-top:18px">
          <h4>Why this helps</h4>
          <p class="muted">Use this tool to price your handmade items fairly, plan production, and communicate timelines to customers.</p>
        </div>

      </div>
    </div>

  </div>

<script>
  // Base data (minutes and grams)
  const BASE = {
    bag: {time: 240, yarn: 250},
    coaster: {time: 45, yarn: 35},
    keychain: {time: 20, yarn: 15},
    slippers: {time: 300, yarn: 400},
    flower: {time: 20, yarn: 10},
    toy: {time: 360, yarn: 300}
  }

  // Yarn multipliers: affects time (thinner = slower) and yarn usage (chunky uses more grams)
  const YARN_FACTORS = {
    thin: {time:1.2, yarn:0.8},
    cotton: {time:1.0, yarn:1.0},
    wool: {time:0.95, yarn:1.05},
    chunky: {time:0.85, yarn:1.35}
  }

  // Skill factors: beginner slower, expert faster
  const SKILL = {beginner:1.25, intermediate:1.0, expert:0.8}

  // Elements
  const productEl = document.getElementById('product')
  const yarnEl = document.getElementById('yarn')
  const skillEl = document.getElementById('skill')
  const calcBtn = document.getElementById('calcBtn')
  const resetBtn = document.getElementById('resetBtn')
  const timeEl = document.getElementById('time')
  const yarnAmtEl = document.getElementById('yarnAmt')
  const priceEl = document.getElementById('priceRange')
  const meterBar = document.getElementById('meterBar')
  const tipEl = document.getElementById('tip')
  const extraTips = document.getElementById('extraTips')
  const tip1 = document.getElementById('tip1')
  const tip2 = document.getElementById('tip2')
  const copyBtn = document.getElementById('copyBtn')
  const downloadBtn = document.getElementById('downloadBtn')

  function minutesToString(mins){
    const h = Math.floor(mins/60)
    const m = Math.round(mins%60)
    if(h>0) return `${h} hr ${m} min`
    return `${m} min`
  }

  function calc(){
    const product = productEl.value
    const yarn = yarnEl.value
    const skill = skillEl.value

    const base = BASE[product]
    const yFactor = YARN_FACTORS[yarn]
    const sFactor = SKILL[skill]

    // compute
    const timeMin = Math.max(5, Math.round(base.time * yFactor.time * sFactor))
    const yarnGrams = Math.max(5, Math.round(base.yarn * yFactor.yarn))

    // price calculation (simple, adaptable)
    // price = labor rate per hour + yarn cost; labor rate here is 200 INR/hour as example
    const laborRate = 200
    const yarnPricePerGram = 1.5
    const basePrice = Math.round((timeMin/60)*laborRate + yarnGrams*yarnPricePerGram)
    const low = Math.round(basePrice*0.9)
    const high = Math.round(basePrice*1.15)

    // difficulty meter (0-100)
    const difficulty = Math.round(((base.time/360) * 100) * (sFactor))
    const meterPercent = Math.max(8, Math.min(95, difficulty))

    // pattern tip suggestions
    const tips = {
      bag: 'Use a 4mm hook for sturdy stitches. Consider lining the bag for durability.',
      coaster: 'Use tight single crochet to keep the coaster flat and firm.',
      keychain: 'Use cotton thread and small hook for tight finish; add a bead to weigh it.',
      slippers: 'Work in rounds and try sole-first pattern. Use thicker yarn for comfort.',
      flower: 'Try layered petals; use stitch markers to keep centers neat.',
      toy: 'Use safety eyes and stuff firmly; stitch seams tightly for durability.'
    }

    // show
    timeEl.textContent = minutesToString(timeMin)
    yarnAmtEl.textContent = yarnGrams + ' g'
    priceEl.textContent = `₹ ${low} — ₹ ${high}`
    meterBar.style.width = meterPercent + '%'
    tipEl.textContent = tips[product]

    // extra tips
    tip1.textContent = `Try adjusting hook size to control finished size (smaller hook = tighter stitch).`
    tip2.textContent = `Test one small sample swatch to calculate exact yarn per square cm for more accuracy.`
    extraTips.style.display = 'block'

    // Save last result in dataset for copy/download
    const result = {product,yarn,skill,timeMin,yarnGrams,priceLow:low,priceHigh:high,tip:tips[product]}
    calcBtn.dataset.latest = JSON.stringify(result)

  }

  calcBtn.addEventListener('click',calc)
  resetBtn.addEventListener('click',()=>{
    productEl.value='bag'; yarnEl.value='cotton'; skillEl.value='intermediate'
    timeEl.textContent = '—'; yarnAmtEl.textContent='—'; priceEl.textContent='—'; tipEl.textContent='—'; extraTips.style.display='none'; meterBar.style.width='0%'
  })

  function applyPreset(e){
    const btn = e.currentTarget
    const p = btn.dataset.product
    productEl.value = p
    yarnEl.value = 'cotton'
    skillEl.value = 'intermediate'
    calc()
  }

  copyBtn.addEventListener('click',()=>{
    const dat = calcBtn.dataset.latest
    if(!dat){ alert('Please calculate first.') ; return }
    const obj = JSON.parse(dat)
    const txt = `Estimate for ${obj.product}: Time ${Math.round(obj.timeMin/60)}h ${obj.timeMin%60}m, Yarn ${obj.yarnGrams}g, Price ₹${obj.priceLow}—₹${obj.priceHigh}. Tip: ${obj.tip}`
    navigator.clipboard?.writeText(txt).then(()=>alert('Copied to clipboard'))
  })

  downloadBtn.addEventListener('click',()=>{
    const dat = calcBtn.dataset.latest
    if(!dat){ alert('Please calculate first.') ; return }
    const blob = new Blob([dat],{type:'application/json'})
    const url = URL.createObjectURL(blob)
    const a = document.createElement('a')
    a.href = url; a.download = 'crochet-estimate.json'; a.click()
    URL.revokeObjectURL(url)
  })

  // small accessibility: enter key triggers calculate
  document.addEventListener('keydown', (e)=>{ if(e.key === 'Enter') calc() })

  // initial demo values
  productEl.value = 'coaster'
  yarnEl.value = 'cotton'
  skillEl.value = 'intermediate'
  calc()

</script>
</body>
</html>
